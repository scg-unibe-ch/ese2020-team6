<div class="post-wrapper" [ngClass]="theme">
  <div class="post">
    <div class="header" *ngIf="!isUpdate, else update">
      <h3 class="title">Create</h3>
    </div>
    <ng-template #update>
      <h3 class="title">Update</h3>
    </ng-template>
    <form #postProductForm="ngForm" (ngSubmit)="onSubmit(postProductForm)">
      <div class="input-grid">
        <app-select name="productType" selectName="Product Type" [(ngModel)]="values.productType" [options]="['Item', 'Service']" appProductTypeValidator></app-select>
        <app-select name="offerType" selectName="Offer Type" [(ngModel)]="values.offerType" [options]="['Sell', 'Rent']" appOfferTypeValidator></app-select>
      </div>
      <div class="input-grid">
        <app-select name="category" selectName="Category" [(ngModel)]="values.category" [options]="['Houses', 'Pets', 'Nice Stuff']" appCategoryValidator></app-select>
        <app-select name="subcategory" selectName="Subcategory" [(ngModel)]="values.subcategory" [options]="['Houses_sub', 'Pets_sub', 'Nice Stuff_sub']" appSubCategoryValidator></app-select>
      </div>
      <app-text-input placeholder="Title" name="title" [(ngModel)]="values.title" appTitleValidator></app-text-input>
      <app-text-area class="input" rows="4" placeholder="Description" name="description" [(ngModel)]="values.description" appDescriptionValidator></app-text-area>
      <div class="input-grid">
        <app-text-input placeholder="Price" name="price" [(ngModel)]="values.price" appPriceValidator></app-text-input>
        <app-select name="status" selectName="Status" [(ngModel)]="values.status" [options]="['Available', 'Lent', 'Sold']" appStatusValidator></app-select>
      </div>
      <div class="input-grid">
        <app-text-input placeholder="Location" name="location" [(ngModel)]="values.location" appLocationValidator></app-text-input>
        <app-select name="isDeliverable" selectName="Deliverable" [(ngModel)]="values.isDeliverable" [options]="['Yes', 'No']" appDeliverableValidator></app-select>
      </div>
      <div class="input-grid temp-spaceing">
        <label class="picture">
          Picture
          <div *ngIf="isUpdate">
            <img class="image" src={{picture}}>
            <div class="imageText">Do you want to Update the Image:</div>
          </div>
          <input (change)="selectFile($event)" name="picture" type="file" size="50" accept="png, jpg">
        </label>
        <app-date placeholder="Expiration Date" name="expirationDate" [(ngModel)]="values.expirationDate" min="tomorrow" appDateValidator></app-date>
      </div>
      <div class="action-wrapper" *ngIf="!isUpdate, else updateButton">
        <button [ngClass]="'button-empty-' + theme" (click)="showPreview(postProductForm, preview)" type="button">Preview</button>
        <button [ngClass]="'button-' + theme" type="submit"  [disabled]="!postProductForm.valid">Create</button>
      </div>
      <ng-template #updateButton> 
        <div class="action-wrapper">
          <button [ngClass]="'button-empty-' + theme" (click)="showPreview(postProductForm, preview)" type="button">Preview</button>
          <button [ngClass]="'button-' + theme" type="submit"  [disabled]="!postProductForm.valid">Update</button>
        </div>
      </ng-template>
    </form>

    <!-- This template displays the overlay content and is connected to the button -->
    <ng-template #preview>
      <div class="buy-wrapper-wrapper">
        <div class="buy-wrapper">
              <h2>Your product</h2>
            <app-product-information [product]="productData" [isPreview]="true" [picture]="picture"></app-product-information>
        </div>
      </div>
    </ng-template>

  </div>
</div>
